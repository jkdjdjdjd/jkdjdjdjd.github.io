/* empty css             */import{E as G,a as M}from"./tab-pane-CA9gdacY.js";import{E as P,a as U}from"./breadcrumb-item-BHFuY-ON.js";import{a8 as z,a9 as D,_ as R,B as $,r as v,x as j,z as K,c as T,b as L,A as x,d as b,w as h,F as Y,l as q,o as y,g as N,t as B,v as J}from"./index-ClR9mido.js";import{G as Q}from"./GoodsItem-CktuxvNZ.js";import{a as W,b as w}from"./category-BuzQjamR.js";import{t as X}from"./typescript-C4g6lTyq.js";import{g as Z}from"./scroll-Cpbtgqy5.js";import{t as H}from"./throttle-Du3P3sCE.js";import"./strings-BKxQoeCT.js";import"./index-CqcoIh08.js";import"./vnode-D1sms20D.js";import"./debounce-gG6lPOQr.js";const V=e=>{let o=0,t=e;for(;t;)o+=t.offsetTop,t=t.offsetParent;return o},ee=(e,o)=>Math.abs(V(e)-V(o)),l="ElInfiniteScroll",te=50,oe=200,ae=0,ne={delay:{type:Number,default:oe},distance:{type:Number,default:ae},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},C=(e,o)=>Object.entries(ne).reduce((t,[a,i])=>{var s,n;const{type:f,default:d}=i,c=e.getAttribute(`infinite-scroll-${a}`);let u=(n=(s=o[c])!=null?s:c)!=null?n:d;return u=u==="false"?!1:u,u=f(u),t[a]=Number.isNaN(u)?d:u,t},{}),k=e=>{const{observer:o}=e[l];o&&(o.disconnect(),delete e[l].observer)},se=(e,o)=>{const{container:t,containerEl:a,instance:i,observer:s,lastScrollTop:n}=e[l],{disabled:f,distance:d}=C(e,i),{clientHeight:c,scrollHeight:u,scrollTop:r}=a,m=r-n;if(e[l].lastScrollTop=r,s||f||m<0)return;let p=!1;if(t===e)p=u-(c+r)<=d;else{const{clientTop:_,scrollHeight:g}=e,S=ee(e,a);p=r+c>=S+_+g-d}p&&o.call(i)};function I(e,o){const{containerEl:t,instance:a}=e[l],{disabled:i}=C(e,a);i||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?o.call(a):k(e))}const re={async mounted(e,o){const{instance:t,value:a}=o;z(a)||X(l,"'v-infinite-scroll' binding value must be a function"),await D();const{delay:i,immediate:s}=C(e,t),n=Z(e,!0),f=n===window?document.documentElement:n,d=H(se.bind(null,e,a),i);if(n){if(e[l]={instance:t,container:n,containerEl:f,delay:i,cb:a,onScroll:d,lastScrollTop:f.scrollTop},s){const c=new MutationObserver(H(I.bind(null,e,a),te));e[l].observer=c,c.observe(e,{childList:!0,subtree:!0}),I(e,a)}n.addEventListener("scroll",d)}},unmounted(e){if(!e[l])return;const{container:o,onScroll:t}=e[l];o==null||o.removeEventListener("scroll",t),k(e)},async updated(e){if(!e[l])await D();else{const{containerEl:o,cb:t,observer:a}=e[l];o.clientHeight&&a&&I(e,t)}}},F=re;F.install=e=>{e.directive("InfiniteScroll",F)};const le=F,ie={class:"container"},ce={class:"bread-container"},ue={class:"sub-container"},de=["infinite-scroll-disabled"],me={__name:"index",setup(e){const o=$(),t=v([]),a=v(!0),i=async()=>{const r=await W(o.params.id);t.value=r},s=v({categoryId:o.params.id,page:1,pageSize:20,sortField:"publishTime"}),n=v([]),f=async()=>{const r=await w(s.value);n.value=r,a.value=!1},d=async r=>{if(s.value.page=1,r.props.name==="orderNum"){const m=await w(s.value);n.value=m,n.value.items.sort((p,_)=>_.orderNum-p.orderNum)}else f()},c=v(!1),u=async()=>{const r=v([]);s.value.page+=1;const{items:m}=await w(s.value);console.log(m),r.value=m,n.value.items.push(...r.value),m.length<=0&&(c.value=!0)};return j(()=>{i(),f()}),(r,m)=>{const p=U,_=P,g=M,S=G,A=K("myLoading"),O=le;return y(),T("div",null,[L("div",ie,[x((y(),T("div",ce,[b(_,{separator:">"},{default:h(()=>[b(p,{to:{path:"/"}},{default:h(()=>[N("首页")]),_:1}),b(p,{to:{path:`/rabbit/category/${t.value.parentId}`}},{default:h(()=>[N(B(t.value.parentName),1)]),_:1},8,["to"]),b(p,null,{default:h(()=>[N(B(t.value.name),1)]),_:1})]),_:1})])),[[A,a.value]]),L("div",ue,[b(S,{onTabClick:d,type:"card",modelValue:s.value.sortField,"onUpdate:modelValue":m[0]||(m[0]=E=>s.value.sortField=E)},{default:h(()=>[b(g,{label:"最新商品",name:"publishTime"}),b(g,{label:"最高人气",name:"orderNum"}),b(g,{label:"评论最多",name:"evaluateNum"})]),_:1},8,["modelValue"]),x((y(),T("div",{class:"body","infinite-scroll-disabled":c.value},[(y(!0),T(Y,null,q(n.value.items,E=>(y(),J(Q,{key:E.id,good:E},null,8,["good"]))),128))],8,de)),[[O,u]])])])])}}},Ie=R(me,[["__scopeId","data-v-3eb10600"]]);export{Ie as default};
